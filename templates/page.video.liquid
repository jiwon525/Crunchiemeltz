{% comment %} <div class="video-page-container">
  <div id="video-wrapper">
    <p>Loading video...</p>
  </div>
</div>

<style>
.video-page-container {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  padding: 50px 20px;
}
#video-wrapper video {
  max-width: 100%;
  height: auto;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const params = new URLSearchParams(window.location.search);
  const videoUrl = params.get("url");

  const wrapper = document.getElementById("video-wrapper");
  if (videoUrl) {
    wrapper.innerHTML = `
      <video width="800" height="450" controls autoplay controlsList="nodownload">
        <source src="${decodeURIComponent(videoUrl)}" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    `;
  } else {
    wrapper.innerHTML = `
      <p class="no-video">No video selected. Please go back to the 
        <a href="{{ routes.root_url }}">homepage</a>.
      </p>
    `;
  }
});
</script> {% endcomment %}

{% comment %} <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Video Page</title>

  {% assign video_url = request.params.url | url_decode %}
  {% assign thumbnail_url = request.params.thumb | url_decode %}
  {% assign full_page_url = shop.url | append: request.path | append: "?" | append: request.query_string %}

  {% if video_url != blank %}
    <!-- âœ… Open Graph tags for social previews -->
    <meta property="og:title" content="Watch this video" />
    <meta property="og:type" content="video.other" />
    <meta property="og:url" content="{{ full_page_url }}" />
    <meta property="og:description" content="Check out this video shared from our store!" />

    <!-- âœ… Thumbnail from each video block -->
    {% if thumbnail_url != blank %}
      <meta property="og:image" content="{{ thumbnail_url | replace: 'http:', 'https:' }}" />
      <meta property="og:image:secure_url" content="{{ thumbnail_url | replace: 'http:', 'https:' }}" />
      <meta property="og:image:width" content="1200" />
      <meta property="og:image:height" content="630" />
      <meta name="twitter:image" content="{{ thumbnail_url }}" />
    {% else %}
      <!-- fallback image if no thumbnail -->
      <meta property="og:image" content="{{ 'video-thumbnail.jpg' | asset_url | prepend: shop.url }}" />
      <meta name="twitter:image" content="{{ 'video-thumbnail.jpg' | asset_url | prepend: shop.url }}" />
    {% endif %}

    <!-- âœ… Video metadata -->
    <meta property="og:video" content="{{ video_url }}" />
    <meta property="og:video:type" content="video/mp4" />
    <meta property="og:video:width" content="1280" />
    <meta property="og:video:height" content="720" />

    <!-- âœ… Twitter card metadata -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Watch this video" />
    <meta name="twitter:description" content="Check out this video shared from our store!" />
  {% endif %}
</head>

<body>
  <div class="video-page-container">
    <div id="video-wrapper">
      <p>Loading video...</p>
    </div>
  </div>

  <style>
    .video-page-container {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      padding: 50px 20px;
    }
    #video-wrapper video {
      max-width: 100%;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }
  </style>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const params = new URLSearchParams(window.location.search);
      const videoUrl = params.get("url");
      const wrapper = document.getElementById("video-wrapper");

      if (videoUrl) {
        wrapper.innerHTML = `
          <video width="800" height="450" controls autoplay muted playsinline controlsList="nodownload">
            <source src="${decodeURIComponent(videoUrl)}" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        `;
      } else {
        wrapper.innerHTML = `
          <p class="no-video">No video selected. Please go back to the 
            <a href="{{ routes.root_url }}">homepage</a>.
          </p>
        `;
      }
    });
  </script>
</body>
</html>```````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````` {% endcomment %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Watch this video | {{ shop.name }}</title>

  {% assign video_url = request.params.url | url_decode %}
  {% assign thumbnail_url = request.params.thumb | url_decode %}
  {% assign full_page_url = shop.url | append: request.path | append: "?" | append: request.query_string %}

  <!-- âœ… Dynamic Open Graph meta for Telegram/Facebook -->
  <meta property="og:title" content="ðŸŽ¬ Watch this video from {{ shop.name }}" />
  <meta property="og:type" content="video.other" />
  <meta property="og:url" content="{{ full_page_url }}" />
  <meta property="og:description" content="Check out this video shared from {{ shop.name }}!" />

  {% if thumbnail_url != blank %}
    <meta property="og:image" content="{{ thumbnail_url }}" />
    <meta property="og:image:secure_url" content="{{ thumbnail_url }}" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
  {% else %}
    <meta property="og:image" content="{{ 'Crunchie_Meltz_Logo_Final-02_1_152d3d90-f8fa-4272-8d49-72a7c5cc3003.jpg' | file_img_url: '1200x630' | prepend: 'https:' }}" />
  {% endif %}

  <!-- âœ… Video meta -->
  {% if video_url != blank %}
    <meta property="og:video" content="{{ video_url }}" />
    <meta property="og:video:type" content="video/mp4" />
    <meta property="og:video:width" content="1280" />
    <meta property="og:video:height" content="720" />
  {% endif %}

  <!-- âœ… Twitter card meta -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Watch this video from {{ shop.name }}" />
  <meta name="twitter:description" content="Check out this video shared from {{ shop.name }}!" />
  {% if thumbnail_url != blank %}
    <meta name="twitter:image" content="{{ thumbnail_url }}" />
  {% else %}
    <meta name="twitter:image" content="{{ 'Crunchie_Meltz_Logo_Final-02_1_152d3d90-f8fa-4272-8d49-72a7c5cc3003.jpg' | file_img_url: '1200x630' | prepend: 'https:' }}" />
  {% endif %}

  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #fdfdfd;
      margin: 0;
      padding: 40px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .video-container {
      position: relative;
      width: 100%;
      max-width: 800px;
      aspect-ratio: 16 / 9;
      overflow: hidden;
      border-radius: 20px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      background-color: #000;
      cursor: pointer;
    }

    .thumbnail {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }

    .play-button {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 60px;
      color: white;
      background: rgba(0, 0, 0, 0.5);
      padding: 15px 25px;
      border-radius: 50%;
      border: 3px solid white;
    }

    video {
      width: 100%;
      height: 100%;
      display: none;
      border-radius: 20px;
    }
  </style>
</head>

<body>
  <div class="video-container" id="video-container">
    <img id="thumbnail" class="thumbnail"
      src="{% if thumbnail_url != blank %}{{ thumbnail_url }}{% else %}{{ 'Crunchie_Meltz_Logo_Final-02_1_152d3d90-f8fa-4272-8d49-72a7c5cc3003.jpg' | file_img_url: '1200x630' | prepend: 'https:' }}{% endif %}"
      alt="Video thumbnail" />
    <div class="play-button">â–¶</div>
    <video id="video" controls playsinline>
      <source id="video-source" src="{{ video_url }}" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const video = document.getElementById("video");
      const thumb = document.getElementById("thumbnail");
      const playBtn = document.querySelector(".play-button");
      const container = document.getElementById("video-container");

      container.addEventListener("click", () => {
        thumb.style.display = "none";
        playBtn.style.display = "none";
        video.style.display = "block";
        video.play();
      });
    });
  </script>
</body>
</html>
